<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body> 
    <h1>비구조화 할당 (Destructuring Assignment)</h1>

    <p>
        비구조화 할당은 배열이나 객체의 속성을 해체하여 그 값을 개별 변수에 담을 수 있게 하는 JavaScript의 문법입니다. <br>
        코드를 더 간결하고 읽기 쉽게 만들어 줍니다. ES6(ECMAScript 2015)부터 도입되었습니다.
    </p>

    <hr>

    <h2>1. 배열 비구조화 할당 (Array Destructuring)</h2>
    <p>
        배열에서 원하는 요소를 쉽게 변수로 추출할 수 있습니다. 배열의 순서에 따라 변수에 값이 할당됩니다.
    </p>
    <script>
        // 기존 방식
        const colors = ['red', 'green', 'blue'];
        const color1_old = colors[0];
        const color2_old = colors[1];
        console.log('기존 방식:', color1_old, color2_old); // red green

        // 비구조화 할당 방식
        const [color1, color2, color3] = colors;
        console.log('배열 비구조화:', color1, color2, color3); // red green blue

        // 일부 값만 추출하거나 건너뛰기
        const [firstColor, , thirdColor] = colors; // 두 번째 값은 건너뛰기
        console.log('일부 값 추출:', firstColor, thirdColor); // red blue

        // 나머지 요소들을 배열로 받기 (Rest Parameter와 유사)
        const [mainColor, ...otherColors] = colors;
        console.log('나머지 요소:', mainColor, otherColors); // red ['green', 'blue']
    </script>

    <hr>

    <h2>2. 객체 비구조화 할당 (Object Destructuring)</h2>
    <p>
        객체에서 원하는 속성(property)을 쉽게 변수로 추출할 수 있습니다. 객체의 키(key) 이름과 동일한 변수 이름으로 값을 할당받습니다.
    </p>
    <script>
        const person = {
            name: '홍길동',
            age: 30,
            city: '서울'
        };

        // 기존 방식
        const name_old = person.name;
        const age_old = person.age;
        console.log('기존 방식:', name_old, age_old); // 홍길동 30

        // 비구조화 할당 방식 (키 이름과 변수 이름이 같아야 함)
        const { name, age, city } = person;
        console.log('객체 비구조화:', name, age, city); // 홍길동 30 서울

        // 일부 속성만 추출
        const { name: userName, city: userCity } = person; // 변수 이름 변경 (name -> userName, city -> userCity)
        console.log('일부 속성 추출 및 이름 변경:', userName, userCity); // 홍길동 서울

        // 존재하지 않는 속성에 기본값 할당
        const { job = '무직', age: userAge } = person; // job 속성이 없으면 '무직' 할당
        console.log('기본값 할당:', userAge, job); // 30 무직

        // 중첩된 객체 비구조화
        const user = {
            id: 1,
            info: {
                email: 'test@example.com',
                phone: '010-1234-5678'
            }
        };
        const { info: { email, phone } } = user;
        console.log('중첩 객체 비구조화:', email, phone); // test@example.com 010-1234-5678
    </script>

    <hr>

    <h2>3. 함수 파라미터에서의 비구조화 할당</h2>
    <p>
        함수의 인자로 객체나 배열을 받을 때, 파라미터 부분에서 바로 비구조화 할당을 사용하여 필요한 값만 추출할 수 있습니다.
    </p>
    <script>
        // 객체를 인자로 받는 함수
        function displayUserInfo({ name, age, city = '알 수 없음' }) {
            console.log(`이름: ${name}, 나이: ${age}, 거주지: ${city}`);
        }

        const userProfile = { name: '김철수', age: 25, city: '부산' };
        displayUserInfo(userProfile); // 이름: 김철수, 나이: 25, 거주지: 부산

        const guestProfile = { name: '익명', age: 10 };
        displayUserInfo(guestProfile); // 이름: 익명, 나이: 10, 거주지: 알 수 없음

        // 배열을 인자로 받는 함수
        function printFirstTwoItems([item1, item2]) {
            console.log(`첫 번째 항목: ${item1}, 두 번째 항목: ${item2}`);
        }
        printFirstTwoItems(['사과', '바나나', '오렌지']); // 첫 번째 항목: 사과, 두 번째 항목: 바나나
    </script>
</body>
</html>